<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    <changeSet author="michal" id="76">
        <createView fullDefinition="false" remarks="" viewName="last_result">select `ihaadb`.`runs`.`timestamp` AS `timestamp`,`ihaadb`.`riders`.`name` AS `name`,`ihaadb`.`riders`.`surname` AS `surname`,`ihaadb`.`horses`.`name` AS `horse`,`ihaadb`.`competitions`.`name` AS `competition`,`ihaadb`.`styles`.`name` AS `styles`,`ihaadb`.`runs`.`run_number` AS `run`,`ihaadb`.`runs`.`time` AS `time`,`target_points`.`targets` AS `targets`,`score`.`score` AS `score`,`target_points`.`target_points_sum` AS `target`,`style_result`.`all_runs` AS `all_runs`,`style_result`.`all_targets` AS `all_targets`,`style_result`.`all_score` AS `all_score` from (`ihaadb`.`runs` left join `ihaadb`.`target_points` on((`ihaadb`.`runs`.`id` = `target_points`.`runs_id`))) join `ihaadb`.`starts` join `ihaadb`.`tracks` join `ihaadb`.`styles` join `ihaadb`.`riders` join `ihaadb`.`competitions` join `ihaadb`.`horses` join `ihaadb`.`score` join `ihaadb`.`style_result` where ((`ihaadb`.`starts`.`id` = `ihaadb`.`runs`.`starts_id`) and (`ihaadb`.`tracks`.`id` = `ihaadb`.`runs`.`tracks_id`) and (`ihaadb`.`styles`.`id` = `ihaadb`.`tracks`.`styles_id`) and (`ihaadb`.`starts`.`riders_id` = `ihaadb`.`riders`.`id`) and (`ihaadb`.`starts`.`horses_id` = `ihaadb`.`horses`.`id`) and (`ihaadb`.`starts`.`competitions_id` = `ihaadb`.`competitions`.`id`) and (`score`.`runs_id` = `ihaadb`.`runs`.`id`) and (`style_result`.`starts_id` = `ihaadb`.`starts`.`id`) and (`style_result`.`styles_id` = `ihaadb`.`styles`.`id`))</createView>
    </changeSet>
</databaseChangeLog>
